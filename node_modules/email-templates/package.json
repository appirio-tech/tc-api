{
  "name": "email-templates",
  "description": "Node.js module for rendering beautiful emails with ejs templates and email-friendly inline CSS using juice.",
  "version": "0.1.1",
  "author": {
    "name": "Nick Baugh",
    "email": "niftylettuce@gmail.com"
  },
  "contributors": [
    {
      "name": "Nick Baugh",
      "email": "niftylettuce@gmail.com"
    },
    {
      "name": "Andrea Baccega",
      "email": "vekexasia@gmail.com"
    },
    {
      "name": "Nic Jansma",
      "url": "http://nicj.net"
    }
  ],
  "keywords": [
    "node-email-templates",
    "ejs",
    "email",
    "templates",
    "email-templates",
    "juice",
    "inline",
    "css"
  ],
  "homepage": "https://github.com/niftylettuce/node-email-templates",
  "repository": {
    "type": "git",
    "url": "https://github.com/niftylettuce/node-email-templates.git"
  },
  "engines": {
    "node": ">= 0.6.0"
  },
  "main": "lib/main.js",
  "dependencies": {
    "ejs": "0.8.3",
    "juice": "~0.3.2",
    "async": "0.1.22",
    "underscore": "1.3.3",
    "combined-stream": "~0.0.4"
  },
  "devDependencies": {
    "nodemailer": "0.3.27",
    "postmark": "0.1.6"
  },
  "readme": "[![Gittip](http://badgr.co/gittip/niftylettuce.png)](https://www.gittip.com/niftylettuce/)\n\n# node-email-templates <sup>[![Version Badge](http://vb.teelaun.ch/niftylettuce/node-email-templates.svg)](https://npmjs.org/package/email-templates)</sup>\n\nNode.js module for rendering beautiful emails with [ejs][1] templates and email-friendly inline CSS using [juice][2].\n\nView these docs generated with [readme-docs](https://github.com/getprove/node-bootstrap-readme-docs) here:\n<http://niftylettuce.github.io/node-email-templates>\n\nFollow [@niftylettuce](http://twitter.com/niftylettuce) on Twitter for updates.\n\nLike this module?  Check out [express-cdn](https://github.com/niftylettuce/express-cdn)!\n\n<table>\n<thead>\n<tr>\n<th>The Rebel's Guide to Email Marketing</th>\n<th>Modern HTML Email</th>\n<th>Email Marketing By the Numbers</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><a href=\"http://goo.gl/JplO3b\"><img src=\"http://ecx.images-amazon.com/images/I/51pDPeVKqqL._SL110_.jpg\" /></a></td>\n<td><a href=\"http://goo.gl/nKk41m\"><img src=\"http://ecx.images-amazon.com/images/I/41uTBv9KbhL._SL110_.jpg\" /></a></td>\n<td><a href=\"http://goo.gl/d1b82E\"><img src=\"http://ecx.images-amazon.com/images/I/51RX-csFsRL._SL110_.jpg\" /></a></td>\n</tr>\n</tbody>\n</table>\n\n## Index\n\n* [Email Templates](#email-templates)\n* [Installation](#installation)\n* [Quick Start](#quick-start)\n* [EJS Custom Tags](#ejs-custom-tags)\n* [Examples](#examples)\n    * [Basic](#basic)\n    * [Nodemailer](#nodemailer)\n    * [Postmark](#postmark)\n* [Lazyweb Requests](#lazyweb-requests)\n* [Changelog](#changelog)\n* [Contributors](#contributors)\n* [License](#license)\n\n\n## Email Templates\n\nFor professional and customizable email templates, please visit <https://github.com/mailchimp/Email-Blueprints>.\n\n\n## Installation\n\n### Unix/OS X\n\n```bash\nnpm install email-templates\n```\n\n### Windows\n\n```bash\nnpm install email-templates-windows\n```\n\n\n## Quick Start\n\n1. Install the module for your respective project `npm install email-templates`.\n2. Create a folder called `templates` inside your root directory (or elsewhere).\n3. For each of your templates, respectively name and create a folder inside the `templates` folder.\n4. Add the following files inside the template's folder:\n    * `html.ejs` - html + [ejs][1] version of your email template (**required**)\n    * `text.ejs` - text + [ejs][1] version of your email template (**optional**)\n    * `style.css` - stylesheet for the template, which will render `html.ejs` with inline CSS (**optional**)\n5. You may use the `include` directive from ejs (for example, to include a common header or footer).  See the `/examples` folder for details.\n6. Utilize one of the examples below for your respective email module and start sending beautiful emails!\n\n\n## EJS Custom Tags\n\nWant to use different opening and closing tags instead of the EJS's default `<%` and `%>`?.\n\n```js\n...\nemailTemplates(templatesDir, { open: '{{', close: '}}' }, function(err, template) {\n...\n```\n\n**NOTE**: You can also pass <a href=\"https://github.com/visionmedia/ejs#options\" target=\"_blank\">other options from EJS's documentation</a>.\n\n\n## Examples\n\n### Basic\n\nRender a template for a single email or render multiple (having only loaded the template once).\n\n```js\nvar path           = require('path')\n  , templatesDir   = path.join(__dirname, 'templates')\n  , emailTemplates = require('email-templates');\n\nemailTemplates(templatesDir, function(err, template) {\n\n  // Render a single email with one template\n  var locals = { pasta: 'Spaghetti' };\n  template('pasta-dinner', locals, function(err, html, text) {\n    // ...\n  });\n\n  // Render multiple emails with one template\n  var locals = [\n    { pasta: 'Spaghetti' },\n    { pasta: 'Rigatoni' }\n  ];\n  var Render = function(locals) {\n    this.locals = locals;\n    this.send = function(err, html, text) {\n      // ...\n    };\n    this.batch = function(batch) {\n      batch(this.locals, this.send);\n    };\n  };\n  template('pasta-dinner', true, function(err, batch) {\n    for(var user in users) {\n      var render = new Render(users[user]);\n      render.batch(batch);\n    }\n  });\n\n});\n```\n\n### [Nodemailer][3]\n\n```js\nvar path           = require('path')\n  , templatesDir   = path.resolve(__dirname, '..', 'templates')\n  , emailTemplates = require('email-templates')\n  , nodemailer     = require('nodemailer');\n\nemailTemplates(templatesDir, function(err, template) {\n\n  if (err) {\n    console.log(err);\n  } else {\n\n    // ## Send a single email\n\n    // Prepare nodemailer transport object\n    var transport = nodemailer.createTransport(\"SMTP\", {\n      service: \"Gmail\",\n      auth: {\n        user: \"some-user@gmail.com\",\n        pass: \"some-password\"\n      }\n    });\n\n    // An example users object with formatted email function\n    var locals = {\n      email: 'mamma.mia@spaghetti.com',\n      name: {\n        first: 'Mamma',\n        last: 'Mia'\n      }\n    };\n\n    // Send a single email\n    template('newsletter', locals, function(err, html, text) {\n      if (err) {\n        console.log(err);\n      } else {\n        transport.sendMail({\n          from: 'Spicy Meatball <spicy.meatball@spaghetti.com>',\n          to: locals.email,\n          subject: 'Mangia gli spaghetti con polpette!',\n          html: html,\n          // generateTextFromHTML: true,\n          text: text\n        }, function(err, responseStatus) {\n          if (err) {\n            console.log(err);\n          } else {\n            console.log(responseStatus.message);\n          }\n        });\n      }\n    });\n\n\n    // ## Send a batch of emails and only load the template once\n\n    // Prepare nodemailer transport object\n    var transportBatch = nodemailer.createTransport(\"SMTP\", {\n      service: \"Gmail\",\n      auth: {\n        user: \"some-user@gmail.com\",\n        pass: \"some-password\"\n      }\n    });\n\n    // An example users object\n    var users = [\n      {\n        email: 'pappa.pizza@spaghetti.com',\n        name: {\n          first: 'Pappa',\n          last: 'Pizza'\n        }\n      },\n      {\n        email: 'mister.geppetto@spaghetti.com',\n        name: {\n          first: 'Mister',\n          last: 'Geppetto'\n        }\n      }\n    ];\n\n    // Custom function for sending emails outside the loop\n    //\n    // NOTE:\n    //  We need to patch postmark.js module to support the API call\n    //  that will let us send a batch of up to 500 messages at once.\n    //  (e.g. <https://github.com/diy/trebuchet/blob/master/lib/index.js#L160>)\n    var Render = function(locals) {\n      this.locals = locals;\n      this.send = function(err, html, text) {\n        if (err) {\n          console.log(err);\n        } else {\n          transportBatch.sendMail({\n            from: 'Spicy Meatball <spicy.meatball@spaghetti.com>',\n            to: locals.email,\n            subject: 'Mangia gli spaghetti con polpette!',\n            html: html,\n            // generateTextFromHTML: true,\n            text: text\n          }, function(err, responseStatus) {\n            if (err) {\n              console.log(err);\n            } else {\n              console.log(responseStatus.message);\n            }\n          });\n        }\n      };\n      this.batch = function(batch) {\n        batch(this.locals, templatesDir, this.send);\n      };\n    };\n\n    // Load the template and send the emails\n    template('newsletter', true, function(err, batch) {\n      for(var user in users) {\n        var render = new Render(users[user]);\n        render.batch(batch);\n      }\n    });\n\n  }\n});\n```\n\n### [Postmark][4]\n\nThis example utilizes [Postmark.js][5].\n\n**NOTE**: Did you know `nodemailer` can also be used to send SMTP email through Postmark? See [this section][6] of their Readme for more info.\n\nFor more message format options, see [this section][7] of Postmark's developer documentation section.\n\n```js\nvar path           = require('path')\n  , templatesDir   = path.resolve(__dirname, '..', 'templates')\n  , emailTemplates = require('email-templates')\n  , postmark       = require('postmark')('your-api-key');\n\nemailTemplates(templatesDir, function(err, template) {\n\n  if (err) {\n    console.log(err);\n  } else {\n\n    // ## Send a single email\n\n    // An example users object with formatted email function\n    var locals = {\n      email: 'mamma.mia@spaghetti.com',\n      name: {\n        first: 'Mamma',\n        last: 'Mia'\n      }\n    };\n\n    // Send a single email\n    template('newsletter', locals, function(err, html, text) {\n      if (err) {\n        console.log(err);\n      } else {\n        postmark.send({\n          From: 'Spicy Meatball <spicy.meatball@spaghetti.com>',\n          To: locals.email,\n          Subject: 'Mangia gli spaghetti con polpette!',\n          HtmlBody: html,\n          TextBody: text\n        }, function(err, response) {\n          if (err) {\n            console.log(err.status);\n            console.log(err.message);\n          } else {\n            console.log(response);\n          }\n        });\n      }\n    });\n\n\n    // ## Send a batch of emails and only load the template once\n\n    // An example users object\n    var users = [\n      {\n        email: 'pappa.pizza@spaghetti.com',\n        name: {\n          first: 'Pappa',\n          last: 'Pizza'\n        }\n      },\n      {\n        email: 'mister.geppetto@spaghetti.com',\n        name: {\n          first: 'Mister',\n          last: 'Geppetto'\n        }\n      }\n    ];\n\n    // Custom function for sending emails outside the loop\n    //\n    // NOTE:\n    //  We need to patch postmark.js module to support the API call\n    //  that will let us send a batch of up to 500 messages at once.\n    //  (e.g. <https://github.com/diy/trebuchet/blob/master/lib/index.js#L160>)\n    var Render = function(locals) {\n      this.locals = locals;\n      this.send = function(err, html, text) {\n        if (err) {\n          console.log(err);\n        } else {\n          postmark.send({\n            From: 'Spicy Meatball <spicy.meatball@spaghetti.com>',\n            To: locals.email,\n            Subject: 'Mangia gli spaghetti con polpette!',\n            HtmlBody: html,\n            TextBody: text\n          }, function(err, response) {\n            if (err) {\n              console.log(err.status);\n              console.log(err.message);\n            } else {\n              console.log(response);\n            }\n          });\n        }\n      };\n      this.batch = function(batch) {\n        batch(this.locals, templatesDir, this.send);\n      };\n    };\n\n    // Load the template and send the emails\n    template('newsletter', true, function(err, batch) {\n      for(user in users) {\n        var render = new Render(users[user]);\n        render.batch(batch);\n      }\n    });\n\n  }\n});\n```\n\n\n## Lazyweb Requests\n\nThese are feature requests that we would appreciate contributors for:\n\n* Rewrite this module to have a more modular API (e.g. template caching and email queue support via kue)\n* Merge with @superjoe30 swig email templates fork\n* Add ability to specify template language `swig`, `jade`, `ejs`, `handlebars`, ...\n* Add ability to specify css language `sass`, `less`, `styl`, ...\n* Add parsing of HTML with CSS inlining and HTML linting\n\n\n## Changelog\n\n* 0.1.1 - Fixed long path issue for Windows\n\n* 0.1.0 - Fixed batch documentation issue\n\n* 0.0.9 - Fixed `juice` dependency issue\n\n* 0.0.8 - Minor updates\n\n* 0.0.7 - Added support for ejs's `include` directive thanks to @nicjansma\n\n* 0.0.6 - Fixed batch problem (`...has no method slice`) thanks to @vekexasia\n\n* 0.0.5 - Added support for an optional [zlib][8] compression type (e.g. you can return compressed html/text buffer for db storage)\n\n    ```bash\n    template('newsletter', locals, 'deflateRaw', function(err, html, text) {\n      // The `html` and `text` are buffers compressed using zlib.deflateRaw\n      // <http://nodejs.org/docs/latest/api/zlib.html#zlib_zlib_deflateraw_buf_callback>\n      // **NOTE**: You could also pass 'deflate' or 'gzip' if necessary, and it works with batch rendering as well\n    })\n    ```\n\n* 0.0.4 (with bug fix for 0.0.3) - Removed requirement for `style.css` and `text.ejs` files with compatibility in `node` v0.6.x to v0.8.x (utilizes `path.exists` vs. `fs.exists` respectively).\n\n\n## Contributors\n\n* Nick Baugh <niftylettuce@gmail.com>\n* Andrea Baccega <vekexasia@gmail.com>\n* Nic Jansma (http://nicj.net)\n\n\n## License\n\nThe MIT License\n\nCopyright (c) 2012- Nick Baugh <niftylettuce@gmail.com> (http://niftylettuce.com/)\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n[1]: https://github.com/visionmedia/ejs\n[2]: https://github.com/LearnBoost/juice\n[3]: https://github.com/andris9/Nodemailer\n[4]: http://postmarkapp.com/\n[5]: https://github.com/voodootikigod/postmark.js\n[6]: https://github.com/andris9/Nodemailer#well-known-services-for-smtp\n[7]: http://developer.postmarkapp.com/developer-build.html#message-format\n[8]: http://nodejs.org/docs/latest/api/zlib.html\n",
  "readmeFilename": "Readme.md",
  "bugs": {
    "url": "https://github.com/niftylettuce/node-email-templates/issues"
  },
  "_id": "email-templates@0.1.1",
  "dist": {
    "shasum": "d133424212e6ade69bb6deeb52fe34792917845d"
  },
  "_from": "email-templates@*",
  "_resolved": "https://registry.npmjs.org/email-templates/-/email-templates-0.1.1.tgz"
}
